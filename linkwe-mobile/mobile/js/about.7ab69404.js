(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"02c0":function(t,e,a){},"0824":function(t,e,a){"use strict";a("bb0b")},"1d15":function(t,e,a){},"2e03":function(t,e,a){},6294:function(t,e,a){"use strict";a("1d15")},"6f29":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:t.search},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t.userId?a("van-tab",{attrs:{title:"我的"}},[a("List",{ref:"list0",attrs:{userId:t.userId,keyword:t.keyword}})],1):t._e(),t._l(t.list,(function(e,s){return a("van-tab",{key:s,attrs:{title:e.sideName}},[a("List",{ref:"list"+(s+1),refInFor:!0,attrs:{sideId:e.sideId,mediaType:e.mediaType,userId:t.userId,keyword:t.keyword}})],1)}))],2)],1)},i=[],n=a("b775"),r=window.CONFIG.services.wecom,c=r+"/chat",o=r+"/material";function l(){return Object(n["a"])({url:c+"/side/h5List"})}function d(t){return Object(n["a"])({url:c+"/item/list",params:t})}function u(t){return Object(n["a"])({url:c+"/collection/list",params:t})}function v(t){return Object(n["a"])({url:c+"/collection/addCollection",method:"post",data:t})}function m(t){return Object(n["a"])({url:c+"/collection/cancleCollection",method:"post",data:t})}function f(t){return Object(n["a"])({url:o+"/temporaryMaterialMediaId",params:t})}var h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:function(e){return t.getList(1)}},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:function(e){return t.getList()}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"list"},[a("div",{staticClass:"content bfc-o"},[0==e.mediaType?a("van-image",{attrs:{width:"80",height:"80",src:e.materialUrl}}):t._e(),2==e.mediaType?a("van-image",{attrs:{width:"80",height:"80",src:e.coverUrl}}):t._e(),a("span",{staticClass:"title"},[t._v(" "+t._s(4==e.mediaType?e.content:e.materialName)+" ")])],1),a("div",{staticClass:"info"},[t._v(" "+t._s(t.mediaTypeObj[e.mediaType])+"类型 "),a("span",{staticClass:"time"},[t._v(t._s(e.createTime))]),a("div",{staticClass:"fr flex"},[a("div",{staticClass:"action",on:{click:function(a){return t.send(e)}}},[t._v("发送")]),t.userId?a("div",{staticClass:"action",on:{click:function(a){return t.collect(e)}}},[t._v(" "+t._s(1==e.collection?"取消":"")+"收藏 ")]):t._e()])])])})),0)],1)],1)},p=[],g=(a("4160"),a("caad"),a("159b"),a("96cf"),a("1da1")),b=a("2909"),C={components:{},props:{sideId:{type:String,default:""},mediaType:{type:String,default:"0"},userId:{type:String,default:""},keyword:{type:String,default:""}},data:function(){return{refreshing:!1,loading:!1,finished:!1,error:!1,pageNum:1,pageSize:10,list:[],collectList:[],mediaTypeObj:{0:"图片",1:"语音",2:"视频",3:"普通文件",4:"文本",5:"海报"}}},watch:{userId:function(){this.getList(1)}},computed:{},created:function(){this.getList()},mounted:function(){},methods:{getList:function(t){var e=this,a=t||this.pageNum++,s=this.pageSize,i=this.keyword;1==t&&(this.list=[]),(this.sideId?d({userId:this.userId,sideId:this.sideId,mediaType:this.mediaType,pageSize:s,pageNum:a,keyword:i}):u({userId:this.userId,pageSize:s,pageNum:a,keyword:i})).then((function(t){var a,s=t.rows,i=t.total;e.sideId||s.forEach((function(t){t.collection=1})),(a=e.list).push.apply(a,Object(b["a"])(s)),e.loading=!1,e.refreshing=!1,e.list.length>=+i&&(e.finished=!0)})).catch((function(){e.error=!0}))},send:function(t){this.$toast.loading({message:"正在发送...",duration:0,forbidClick:!0});var e=void 0,a=this;wx.invoke("getContext",{},function(){var s=Object(g["a"])(regeneratorRuntime.mark((function s(i){var n,r,c,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("getContext:ok"!=i.err_msg){s.next=34;break}if(e=i.entry,n={},s.prev=3,["single_chat_tools","group_chat_tools","normal"].includes(e)){s.next=7;break}return a.$toast("入口错误："+e),s.abrupt("return");case 7:r={0:"image",2:"video",3:"file",4:"text",5:"news"},s.t0=t.mediaType,s.next="4"===s.t0?11:"0"===s.t0||"2"===s.t0||"3"===s.t0?13:"5"===s.t0?22:11;break;case 11:return n.text={content:t.content},s.abrupt("break",24);case 13:return c={url:t.materialUrl,type:r[t.mediaType],name:t.materialName},s.next=16,f(c);case 16:if(o=s.sent,o.data){s.next=20;break}return a.$toast("获取素材id失败"),s.abrupt("return");case 20:return n[r[t.mediaType]]={mediaid:o.data.media_id},s.abrupt("break",24);case 22:return n.news={link:"",title:"",desc:"",imgUrl:""},s.abrupt("break",24);case 24:n.msgtype=r[t.mediaType],s.next=30;break;case 27:s.prev=27,s.t1=s["catch"](3),a.$dialog({message:"err"+JSON.stringify(s.t1)});case 30:wx.invoke("sendChatMessage",n,(function(t){t.err_msg})),a.$toast.clear(),s.next=36;break;case 34:a.$toast.clear(),a.$dialog({message:"进入失败："+JSON.stringify(i)});case 36:case"end":return s.stop()}}),s,null,[[3,27]])})));return function(t){return s.apply(this,arguments)}}())},collect:function(t){var e=this;(1==t.collection?m:v)({userId:this.userId,materialId:t.materialId}).then((function(){t.collection=[1,0][t.collection],e.$toast("操作成功")}))}}},_=C,y=(a("d1ac"),a("2877")),k=Object(y["a"])(_,h,p,!1,null,"d41f2d8a",null),w=k.exports,x={components:{List:w},props:{},data:function(){return{keyword:"",active:0,list:[],loading:!1,finished:!1,show:!1}},watch:{},computed:{userId:function(){return this.$store.state.userId}},beforeCreate:function(){},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this;l().then((function(e){var a=e.rows;e.total;t.list=a}))},search:function(){this.$refs["list"+this.active].getList(1)},add:function(){}}},I=x,T=(a("de6f"),Object(y["a"])(I,s,i,!1,null,"2e170bdc",null));e["default"]=T.exports},"711b":function(t,e,a){},"7f4b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("van-icon",{attrs:{name:"cross",color:"#9c9c9c",size:"16"},on:{click:function(e){return t.$router.back()}}}),a("span",{staticClass:"title"},[t._v(" 社群关系 ")])],1),a("van-divider"),a("div",{staticClass:"labelPge"},[a("van-tabs",{attrs:{color:"#2C8CF0","line-width":"50%","line-height":"1.4px","title-active-color":"#2C8CF0"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"添加的员工(5)"}},[a("van-list",{attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return a("van-cell",{key:e},[a("div",{staticClass:"details"},[a("div",{staticClass:"detail"},[a("div",{staticClass:"left"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:"",alt:""}})]),a("div",{staticClass:"right"},[a("div",[a("span",[t._v("张三 ")])]),a("div",{staticClass:"c9"},[a("span",[t._v("添加时间：")]),a("span",[t._v("2021-02-17 00:50")])])])])])])])})),1)],1),a("van-tab",{attrs:{title:"添加的群聊(3)"}},[a("div",{staticClass:"groupchat1"},[t._v("只看与我共同的群聊")]),a("van-list",{attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return a("van-cell",{key:e},[a("div",{staticClass:"details"},[a("div",{staticClass:"detail"},[a("div",{staticClass:"left"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:"",alt:""}})]),a("div",{staticClass:"right"},[a("div",[t._v("客户分享群(群人数)")]),a("div",[a("span",{staticClass:"c9"},[t._v("群主：")]),a("span",{staticClass:"c9"},[t._v("张三")])]),a("div",{staticClass:"c9"},[a("span",[t._v("入群时间：")]),a("span",[t._v("2021-02-17 00:50")])])])]),a("div",{staticClass:"groupchat2"},[t._v("共同群聊")])])])])})),1)],1)],1)],1)],1)},i=[],n={data:function(){return{active:0,list:[],loading:!1,finished:!1}},methods:{onLoad:function(){var t=this;setTimeout((function(){for(var e=0;e<2;e++)t.list.push(t.list.length+1);t.loading=!1,t.list.length>=2&&(t.finished=!0)}),1e3)}}},r=n,c=(a("0824"),a("2877")),o=Object(c["a"])(r,s,i,!1,null,"07a0e618",null);e["default"]=o.exports},a89b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details"},[a("div",{staticClass:"detail"},[a("div",{staticClass:"left"},[t._m(0),a("div",{staticClass:"right"},[a("div",[a("span",[t._v("张三 ")]),a("van-icon",{attrs:{name:"manager",color:"#9c9c9c"}})],1),a("div",{staticClass:"c9"},[a("span",[t._v("昵称：")]),a("span",[t._v(t._s(t.form.name))])])])]),a("div",{staticClass:"data",on:{click:t.goRoute}},[t._v("详细资料>")])]),a("div",{staticClass:"detail"},[a("div",{staticClass:"c9"},[t._v("手机号")]),a("div",[t._v(t._s(t.form.remarkMobiles))])]),a("van-divider"),a("div",{staticClass:"detail"},[a("div",{staticClass:"c9"},[t._v("年龄")]),a("div",[t._v(t._s(t.getage))])]),a("van-divider"),a("div",{staticClass:"detail"},[a("div",{staticClass:"c9"},[t._v("生日")]),a("div",[t._v(t._s(t.form.birthday))])]),a("van-divider"),a("div",{staticClass:"detail"},[a("div",{staticClass:"c9"},[t._v("邮箱")]),a("div",[t._v(t._s(t.form.email))])])],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"userlabel"},[a("div",{staticClass:"detail"},[a("div",[t._v("客户标签")]),a("div",{staticClass:"data",attrs:{"is-link":""},on:{click:function(e){t.show=!0}}},[t._v("编辑")])]),a("van-row",{staticClass:"labels",attrs:{gutter:"10"}},[a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])])],1)],1),a("div",{staticClass:"divider"}),a("van-action-sheet",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-nav-bar",{attrs:{title:"客户标签","right-text":"取消"},on:{"click-right":function(e){t.show=!1}}}),a("div",{staticClass:"content"},[a("span",[t._v("测试:")]),a("van-row",{staticClass:"labels",attrs:{gutter:"8"}},[a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label",on:{click:t.userLabel}},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])]),a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label"},[t._v("标签1")])])],1),a("div",{staticClass:"branch"},[a("van-divider"),a("p",[t._v("标签组:")]),a("van-row",{staticClass:"labels"},[a("van-col",{attrs:{span:"4.5"}},[a("div",{staticClass:"label",on:{click:t.changeLabel}},[t._v("标签1")])])],1),a("van-button",{staticClass:"saveinfo",attrs:{type:"info",round:""},on:{click:t.saveInfo}},[t._v("保存")])],1)],1)],1),a("div",{staticClass:"realationship"},[a("div",{staticClass:"detail"},[a("div",[t._v("社交关系")]),a("div",{staticClass:"data",on:{click:t.detailGoRoute}},[t._v("详情")])]),t._m(1)]),a("div",{staticClass:"divider"}),a("div",{staticClass:"addwaiting"},[a("div",{staticClass:"detail"},[a("div",[t._v("客户轨迹")]),a("div",{staticClass:"data",attrs:{"is-link":""},on:{click:function(e){t.usershow=!0}}},[t._v("添加待办>")])]),a("van-row",{staticClass:"labels",attrs:{gutter:"8"}},[a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"label1"},[t._v("信息动态")])]),a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"label1"},[t._v("社交动态")])]),a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"label1"},[t._v("活动动态")])]),a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"label1"},[t._v("待办动态")])])],1),a("van-steps",{attrs:{direction:"vertical","inactive-color":"#2c8cf0",active:t.active}},[a("p",{staticClass:"f12",staticStyle:{position:"relative",left:"-32px"}},[t._v(" 2021-02-16 星期二 ")]),a("van-step",{staticClass:"msg"},[a("span",{staticClass:"f12 po"},[t._v(" 12:40")]),a("span",{staticClass:"fs14"},[t._v("信息动态")]),a("span",{staticClass:"deldynamic"},[t._v("删除")]),a("p",{staticClass:"fs14 con "},[t._v("编辑编辑")])]),a("van-step",[a("span",{staticClass:"f12 po"},[t._v(" 12:40")]),a("span",{staticClass:"fs14"},[t._v("社交动态")]),a("span",{staticClass:"deldynamic"},[t._v("删除")]),a("p",{staticClass:"fs14 con "},[t._v("编辑编辑")])])],1),a("van-divider"),a("van-steps",{attrs:{direction:"vertical","inactive-color":"#2c8cf0",active:t.active}},[a("p",{staticClass:"f12",staticStyle:{position:"relative",left:"-32px"}},[t._v(" 2021-02-16 星期二 ")]),a("van-step",{on:{click:function(e){t.todonewsshow=!0}}},[a("span",{staticClass:"f12 po"},[t._v(" 12:40")]),a("span",{staticClass:"fs14"},[t._v("待办动态")]),a("span",{staticClass:"finish"},[t._v("完成")]),a("span",{staticClass:"deldynamic"},[t._v("删除")]),a("p",{staticClass:"fs14 con "},[t._v("编辑编辑")])])],1)],1),a("van-action-sheet",{model:{value:t.usershow,callback:function(e){t.usershow=e},expression:"usershow"}},[a("van-nav-bar",{attrs:{title:"客户待办","right-text":"取消"},on:{"click-right":function(e){t.usershow=!1}}}),a("van-form",{on:{submit:t.onSubmit}},[a("van-field",{staticClass:"conagency",attrs:{name:"待办内容",label:"待办内容",placeholder:"请输入待办内容",type:"textarea",required:"",rules:[{required:!0,message:"请输入待办内容"}]},model:{value:t.conagency,callback:function(e){t.conagency=e},expression:"conagency"}}),a("van-field",{attrs:{"is-link":"",readonly:"",label:"待办日期",placeholder:"请选择",required:"",rules:[{required:!0,message:"请输入待办日期"}]},on:{click:function(e){t.dateshow=!0}},model:{value:t.dateagency,callback:function(e){t.dateagency=e},expression:"dateagency"}}),a("van-calendar",{attrs:{color:"#1989fa","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.onConfirm},model:{value:t.dateshow,callback:function(e){t.dateshow=e},expression:"dateshow"}}),a("van-field",{attrs:{"is-link":"",readonly:"",label:"待办时间",placeholder:"请选择",required:"",rules:[{required:!0,message:"请输入待办时间"}]},on:{click:function(e){t.starttimeshow=!0}},model:{value:t.timeagency,callback:function(e){t.timeagency=e},expression:"timeagency"}}),a("van-action-sheet",{model:{value:t.starttimeshow,callback:function(e){t.starttimeshow=e},expression:"starttimeshow"}},[a("van-datetime-picker",{attrs:{type:"time",title:"请选择开始时间","min-hour":0,"max-hour":23},on:{cancel:t.timecancel,confirm:t.starttimeconfirm},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1),a("van-action-sheet",{model:{value:t.endtimeshow,callback:function(e){t.endtimeshow=e},expression:"endtimeshow"}},[a("van-datetime-picker",{attrs:{type:"time",title:"请选择结束时间","min-hour":0,"max-hour":23},on:{cancel:t.timecancel,confirm:t.endtimeconfirm},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("保存")])],1)],1)],1),a("van-action-sheet",{model:{value:t.todonewsshow,callback:function(e){t.todonewsshow=e},expression:"todonewsshow"}},[a("van-nav-bar",{attrs:{title:"客户待办","right-text":"删除"},on:{"click-right":t.deltodoshow}}),a("van-field",{staticClass:"conagency",attrs:{name:"待办内容",label:"待办内容",placeholder:"请输入待办内容",type:"textarea",required:"",readonly:"",rules:[{required:!0,message:"请输入待办内容"}]},model:{value:t.conagency,callback:function(e){t.conagency=e},expression:"conagency"}}),a("van-field",{attrs:{"is-link":"",readonly:"",label:"待办日期",placeholder:"请选择",required:"",rules:[{required:!0,message:"请输入待办日期"}]},on:{click:function(e){t.dateshow=!0}},model:{value:t.dateagency,callback:function(e){t.dateagency=e},expression:"dateagency"}}),a("van-calendar",{attrs:{color:"#1989fa","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.onConfirm},model:{value:t.dateshow,callback:function(e){t.dateshow=e},expression:"dateshow"}}),a("van-field",{attrs:{"is-link":"",readonly:"",label:"待办时间",placeholder:"请选择",required:"",rules:[{required:!0,message:"请输入待办时间"}]},on:{click:function(e){t.starttimeshow=!0}},model:{value:t.timeagency,callback:function(e){t.timeagency=e},expression:"timeagency"}}),a("van-action-sheet",{model:{value:t.starttimeshow,callback:function(e){t.starttimeshow=e},expression:"starttimeshow"}},[a("van-datetime-picker",{attrs:{type:"time",title:"请选择开始时间","min-hour":0,"max-hour":23},on:{cancel:t.timecancel,confirm:t.starttimeconfirm},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1),a("van-action-sheet",{model:{value:t.endtimeshow,callback:function(e){t.endtimeshow=e},expression:"endtimeshow"}},[a("van-datetime-picker",{attrs:{type:"time",title:"请选择结束时间","min-hour":0,"max-hour":23},on:{cancel:t.timecancel,confirm:t.endtimeconfirm},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("保存")])],1)],1),a("div",{staticClass:"divider"})],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img"},[a("img",{attrs:{src:"",alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},[a("div",{staticClass:"boxnumber"},[a("p",[t._v("添加的员工")]),a("div",{staticClass:"number"},[t._v("8")])]),a("div",{staticClass:"boxnumber"},[a("p",[t._v("添加的群聊")]),a("div",{staticClass:"number"},[t._v("8")])]),a("div",{staticClass:"boxnumber"},[a("p",[t._v("共同的群聊")]),a("div",{staticClass:"number"},[t._v("8")])])])}],n=(a("99af"),a("caad"),a("c2eb")),r={data:function(){return{show:!1,usershow:!1,conagency:"",dateagency:"",dateshow:!1,minDate:new Date(2021,0,1),maxDate:new Date(2021,12,31),timeagency:"",starttimeshow:!1,endtimeshow:!1,currentTime:"12:00",startTime:"",endTime:"",actions:[{name:"选项一"},{name:"选项二"},{name:"选项三"}],active:-1,todonewsshow:!1,externalUserid:"wm2H-nDQAACG5x4XjsM1OoW8UVfpbn3A",userId:"45DuXiangShangQingXie",form:{name:"",remarkMobiles:"",birthday:"",email:"",address:"",qq:"",position:"",remarkCorpName:"",description:""}}},watch:{"$store.state.userId":function(t){this.userId=t,this.getDetail()}},computed:{getage:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();if(this.form.birthday){var i=this.form.birthday.substring(0,4),n=0==this.form.birthday.substring(5,6)?this.form.birthday.substring(6,7):this.form.birthday.substring(5,7),r=0==this.form.birthday.substring(7,8)?this.form.birthday.substring(8,9):this.form.birthday.substring(8,10);if(parseInt(a)>parseInt(n)){var c=parseInt(e)-parseInt(i);return c}if(parseInt(a)==parseInt(n)&&parseInt(s)>=parseInt(r)){var o=parseInt(e)-parseInt(i);return o}var l=parseInt(e)-parseInt(i)-1;return l}return""}},methods:{getDetail:function(){this.$toast.loading({message:"正在加载...",duration:0,forbidClick:!0});var t=void 0,e=this;try{wx.invoke("getContext",{},(function(a){if("getContext:ok"==a.err_msg){if(t=a.entry,!["single_chat_tools","group_chat_tools","contact_profile"].includes(t))return void e.$toast("入口错误："+t);wx.invoke("getCurExternalContact",{},(function(t){"getCurExternalContact:ok"==t.err_msg?(e.externalUserid=t.userId,Object(n["a"])({externalUserid:e.externalUserid,userId:e.userId}).then((function(t){var a=t.data;e.$toast.clear(),e.$dialog({message:"获取客户成功："+JSON.stringify(a)})})).catch((function(t){e.$toast.clear(),e.$dialog({message:"获取客户失败："+JSON.stringify(t)})}))):(e.$toast.clear(),e.$dialog({message:"获取客户id失败："+JSON.stringify(t)}))}))}else e.$toast.clear(),e.$dialog({message:"进入失败："+JSON.stringify(a)})}))}catch(a){e.$dialog({message:"err"+JSON.stringify(a)})}},onSubmit:function(){},formatDate:function(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},onConfirm:function(t){this.dateshow=!1,this.dateagency=this.formatDate(t)},timecancel:function(){this.starttimeshow=!1},starttimeconfirm:function(t){this.startTime=t,this.starttimeshow=!1,this.endtimeshow=!0},endtimeconfirm:function(t){this.endTime=t,this.endtimeshow=!1;var e="";this.startTime>this.endTime&&(e=this.startTime,this.startTime=this.endTime,this.endTime=e),this.endtimeshow=!1,this.timeagency=this.formatTime()},formatTime:function(){return"".concat(this.startTime,"-").concat(this.endTime)},deltodoshow:function(){},goRoute:function(){this.$router.push({path:"/detail",query:{}})},detailGoRoute:function(){this.$router.push({path:"/community",query:{}})},userLabel:function(){},changeLabel:function(){},saveInfo:function(){}},created:function(){}},c=r,o=(a("6294"),a("2877")),l=Object(o["a"])(c,s,i,!1,null,"21051878",null);e["default"]=l.exports},bb0b:function(t,e,a){},c2eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return c}));a("a4d3"),a("e01a");var s=a("b775"),i=window.CONFIG.services.wecom,n=i+"/portrait";function r(t){return Object(s["a"])({url:n+"/findWeCustomerInfo",params:t})}function c(t){return Object(s["a"])({url:n+"/updateWeCustomerInfo",method:"post",data:{externalUserid:t.externalUserid,userId:t.userId,remarkMobiles:t.remarkMobiles,birthday:t.birthday,email:t.email,address:t.address,qq:t.qq,position:t.position,remarkCorpName:t.remarkCorpName,description:t.description}})}},c6e0:function(t,e,a){"use strict";a("2e03")},d1ac:function(t,e,a){"use strict";a("02c0")},dc79:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("van-icon",{attrs:{name:"cross",color:"#9c9c9c",size:"16"},on:{click:function(e){return t.$router.back()}}}),a("span",{staticClass:"title"},[t._v(" 客户资料 ")]),t.flage?a("div",{staticClass:"data",on:{click:t.edit}},[t._v("编辑")]):a("div",{staticClass:"data",on:{click:t.saveUserInformation}},[t._v("保存")])],1),a("van-divider"),a("van-form",{attrs:{disabled:t.flage},on:{submit:t.saveUserInformation}},[a("div",{staticClass:"details"},[a("div",{staticClass:"detail"},[a("div",{staticClass:"left"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:"",alt:""}})]),a("div",{staticClass:"right"},[a("div",[a("span",[t._v("张三 ")]),a("van-icon",{attrs:{name:"manager",color:"#9c9c9c"}})],1),a("div",{staticClass:"c9"},[a("span",[t._v("昵称：")]),a("span",[t._v(t._s(t.form.name))])])])])])]),a("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号","input-align":"right"},model:{value:t.form.remarkMobiles,callback:function(e){t.$set(t.form,"remarkMobiles",e)},expression:"form.remarkMobiles"}}),a("van-field",{attrs:{name:"年龄",label:"年龄",placeholder:"年龄","input-align":"right"},model:{value:t.getage,callback:function(e){t.getage=e},expression:"getage"}}),a("div",{staticClass:"details"},[a("div",{staticClass:"detail"},[a("div",{staticClass:"c9"},[t._v("生日")]),a("div",{staticClass:"c9"},[t._v(t._s(t.form.birthday))])])]),a("van-field",{attrs:{name:"邮箱",label:"邮箱",placeholder:"邮箱","input-align":"right"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),a("van-field",{attrs:{name:"地址",label:"地址",placeholder:"地址","input-align":"right"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}}),a("van-field",{attrs:{name:"QQ",label:"QQ",placeholder:"QQ","input-align":"right"},model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}}),a("van-field",{attrs:{name:"职业",label:"职业",placeholder:"职业","input-align":"right"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}}),a("van-field",{attrs:{name:"公司",label:"公司",placeholder:"公司","input-align":"right"},model:{value:t.form.remarkCorpName,callback:function(e){t.$set(t.form,"remarkCorpName",e)},expression:"form.remarkCorpName"}}),a("van-field",{staticClass:"others",attrs:{name:"其他描述",label:"其他描述",placeholder:"其他描述","input-align":"left",type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)},i=[],n=a("c2eb"),r={data:function(){return{flage:!0,form:{externalUserid:"wm2H-nDQAACG5x4XjsM1OoW8UVfpbn3A",userId:"45DuXiangShangQingXie",name:"",remarkMobiles:"",birthday:"",email:"",address:"",qq:"",position:"",remarkCorpName:"",description:""}}},computed:{getage:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();if(this.form.birthday){var i=this.form.birthday.substring(0,4),n=0==this.form.birthday.substring(5,6)?this.form.birthday.substring(6,7):this.form.birthday.substring(5,7),r=0==this.form.birthday.substring(7,8)?this.form.birthday.substring(8,9):this.form.birthday.substring(8,10);if(parseInt(a)>parseInt(n)){var c=parseInt(e)-parseInt(i);return c}if(parseInt(a)==parseInt(n)&&parseInt(s)>=parseInt(r)){var o=parseInt(e)-parseInt(i);return o}var l=parseInt(e)-parseInt(i)-1;return l}return""}},created:function(){var t=this;Object(n["a"])({externalUserid:this.form.externalUserid,userId:this.form.userId}).then((function(e){var a=e.data;t.form=a})).catch((function(t){}))},methods:{edit:function(){this.flage=!this.flage},saveUserInformation:function(){this.flage=!this.flage,Object(n["b"])(this.form).then((function(t){})).catch((function(t){}))}}},c=r,o=(a("c6e0"),a("2877")),l=Object(o["a"])(c,s,i,!1,null,"3ae3bf3b",null);e["default"]=l.exports},de6f:function(t,e,a){"use strict";a("711b")}}]);